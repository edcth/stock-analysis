<div>
  <div *ngIf="!alert">No alert setup</div>

  <div *ngIf="success" class="alert alert-success" role="alert">Alerts updated</div>

  <app-error-display *ngIf="errors" [errors]="errors"></app-error-display>

  <div *ngIf="alert">
    You will be pinged if price crosses the following price points:

    <div class="row">
      <div class="col">
        <ul class="mt-3 list-group">
          <li *ngFor="let pp of alert.points" class="mt-2 list-group-item">
            {{pp.value | currency}}
            <button type="button" class="btn btn-secondary btn-sm float-right" (click)="removeAlert(pp.id)">remove</button>
          </li>
        </ul>
      </div>
      <div class="col"></div>
    </div>
  </div>

  <div class="mt-3">
    <h5>Add new alert</h5>
		<form>
      <div class="form-row mt-4" *ngIf="this.owned && this.owned.averageCost > 0">
        <div class="col">
          <label>Add alert based on your current cost of <b>{{this.owned.averageCost | currency}}</b></label>
          <div>
            <select class="form-control" #costBasedSelect>
              <option *ngFor="let pp of costBasedAlerts"
                value="{{pp.value}}"
                [attr.selected]="pp.value == this.owned.averageCost.toFixed(2) ? true : null">{{pp.label}}</option>
            </select>
            <button type="button" class="btn btn-primary mt-2" (click)="addPricePoint(costBasedSelect.value)">Add cost based alert</button>
          </div>
        </div>
        <div class="col"></div>
      </div>
      <div class="form-row mt-4">
        <div class="col">
          <label>Add alert based on the current stock price of <b>{{stock.price | currency}}</b></label>
          <div>
            <select class="form-control" #priceBasedSelect>
              <option *ngFor="let pp of priceBasedAlerts"
                value="{{pp.value}}"
                [attr.selected]="pp.value == stock.price ? true : null">{{pp.label}}</option>
            </select>
            <button type="button" class="btn btn-primary mt-2" (click)="addPricePoint(priceBasedSelect.value)">Add price based alert</button>
          </div>
        </div>
        <div class="col"></div>
      </div>
      <div class="form-row mt-4">
        <div class="col">
          <label for="newPricePoint">Or add an alert based on custom value</label>
          <input type="number" class="form-control" id="newPricePoint" name="newPricePoint" #customPricePoint>
        </div>
        <div class="col"></div>
      </div>
      <div class="mt-2">
        <button type="submit" class="btn btn-primary mb-2 mr-2" (click)="addPricePoint(customPricePoint.value)">Add custom alert</button>
      </div>
		</form>
	</div>
</div>
